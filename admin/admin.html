<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Admin – Order Management</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body class="bg-light">
    <div class="container py-5">
      <!-- ===== ADMIN LOGIN ===== -->
      <div id="adminLoginBox" class="row justify-content-center">
        <div class="col-md-4">
          <div class="card shadow">
            <div class="card-body">
              <h4 class="text-center mb-3">Admin Login</h4>

              <div class="mb-3">
                <label class="form-label">Username</label>
                <input id="adminUser" class="form-control" />
              </div>

              <div class="mb-3">
                <label class="form-label">Password</label>
                <input id="adminPass" type="password" class="form-control" />
              </div>

              <div class="d-grid">
                <button class="btn btn-primary" id="adminLoginBtn">
                  Login
                </button>
              </div>

              <p id="loginMsg" class="text-danger mt-3 text-center"></p>
            </div>
          </div>
        </div>
      </div>

      <!-- ===== ADMIN DASHBOARD ===== -->
      <div id="adminOrdersBox" class="d-none">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h3>Admin – Order Management</h3>
          <button class="btn btn-outline-danger btn-sm" id="adminLogoutBtn">
            Logout
          </button>
        </div>

        <!-- ===== ANALYTICS DASHBOARD ===== -->
        <div class="row g-3 mb-4" id="analyticsDashboard">
          <div class="col-md-3">
            <div class="card text-center shadow-sm">
              <div class="card-body">
                <h6 class="text-muted">Total Orders</h6>
                <h3 id="totalOrders">0</h3>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card text-center shadow-sm">
              <div class="card-body">
                <h6 class="text-muted">Total Revenue</h6>
                <h3>₱<span id="totalRevenue">0</span></h3>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card text-center shadow-sm">
              <div class="card-body">
                <h6 class="text-muted">Today’s Orders</h6>
                <h3 id="todayOrders">0</h3>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card text-center shadow-sm">
              <div class="card-body">
                <h6 class="text-muted">Pending Orders</h6>
                <h3 id="pendingOrders">0</h3>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card text-center shadow-sm">
              <div class="card-body">
                <h6 class="text-muted">Complete Orders</h6>
                <h3 id="completedOrders">0</h3>
              </div>
            </div>
          </div>
        </div>

        <div class="table-responsive">
          <table class="table table-bordered align-middle text-center">
            <thead class="table-dark">
              <tr>
                <th>Order Reference</th>
                <th>Customer</th>
                <th>Order Date</th>
                <th>Status</th>
                <th>Update Status</th>
              </tr>
            </thead>

            <tbody id="orderTableBody"></tbody>
          </table>
        </div>
        <!-- ===== CHARTS ===== -->
        <div class="row g-4 mb-4">
          <div class="col-md-6">
            <div class="card shadow-sm">
              <div class="card-body">
                <h6 class="text-center text-muted mb-3">Daily Orders</h6>
                <canvas id="ordersChart"></canvas>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card shadow-sm">
              <div class="card-body">
                <h6 class="text-center text-muted mb-3">Daily Revenue</h6>
                <canvas id="revenueChart"></canvas>
              </div>
            </div>
          </div>
        </div>
        <!-- ===== ORDERS PER DAY TABLE ===== -->
        <div class="card shadow-sm mb-4">
          <div class="card-body">
            <h6 class="text-muted mb-3">Orders Per Day</h6>
            <div class="table-responsive">
              <table class="table table-sm table-bordered text-center">
                <thead class="table-light">
                  <tr>
                    <th>Date</th>
                    <th>Orders</th>
                    <th>Revenue (₱)</th>
                  </tr>
                </thead>
                <tbody id="ordersPerDayBody"></tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="d-flex gap-2 mb-3">
          <button class="btn btn-outline-success btn-sm" id="exportCSV">
            Export CSV
          </button>
          <button class="btn btn-outline-primary btn-sm" id="exportExcel">
            Export Excel
          </button>
        </div>

        <p id="adminMsg" class="mt-3 text-center text-muted"></p>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="/admin/admin.js"></script>
  </body>
</html>
